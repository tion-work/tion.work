#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œç±»å‹æ£€æŸ¥
echo "ğŸ” è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥..."
npm run type-check

# è¿è¡Œ ESLint
echo "ğŸ” è¿è¡Œ ESLint æ£€æŸ¥..."
npm run lint

# æ£€æŸ¥è¯­æ³•é”™è¯¯
echo "ğŸ” æ£€æŸ¥è¯­æ³•é”™è¯¯..."
if grep -r "className.*[^\"']$" frontends/dev/src --include="*.tsx" --include="*.ts"; then
  echo "âŒ å‘ç°æœªé—­åˆçš„ className å­—ç¬¦ä¸²ï¼Œè¯·ä¿®å¤åé‡è¯•"
  exit 1
fi

if grep -r "<[^>]*$" frontends/dev/src --include="*.tsx" --include="*.ts"; then
  echo "âŒ å‘ç°æœªé—­åˆçš„ JSX æ ‡ç­¾ï¼Œè¯·ä¿®å¤åé‡è¯•"
  exit 1
fi

echo "âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥æäº¤ä»£ç "
