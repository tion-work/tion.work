# AI Agent 协作规范

## 项目概述

**tion.work** 是一个多前端 + 单后端的开发者工具集合平台，采用现代化的微服务架构。

## 技术栈

### 前端技术栈

- **框架**: Next.js 14+ (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS + shadcn/ui
- **状态管理**: Zustand
- **代码编辑器**: Monaco Editor
- **图标**: Lucide React
- **图表**: Recharts

### 后端技术栈

- **语言**: Go 1.23
- **框架**: Gin
- **数据库**: PostgreSQL + SQLite (GORM ORM)
- **缓存**: Redis
- **容器化**: Docker + Docker Compose

## 项目结构

```
tion.work/
├── frontends/           # 6个独立的前端应用
│   ├── index/          # 主站 (端口 3001)
│   ├── dev/            # 开发工具站 (端口 3002) - 核心功能
│   ├── admin/          # 管理后台 (端口 3003)
│   ├── docs/           # 文档站点 (端口 3004)
│   ├── mobile/         # 移动端 (端口 3005)
│   └── crypto-nav/     # 加密货币导航站 (端口 3006)
├── backend/            # Go 后端 API (端口 8080)
├── shared/             # 共享资源
├── scripts/            # 自动化脚本
└── templates/          # 模板文件
```

## AI 协作规范

### 1. 代码修改原则

- **保持一致性**: 遵循项目现有的代码风格和架构模式
- **渐进式改进**: 优先修复现有问题，避免大规模重构
- **测试优先**: 修改代码前先确保有相应的测试覆盖
- **文档同步**: 代码修改后及时更新相关文档

### 2. 容器环境开发

- **环境隔离**: 所有开发都在 Docker 容器中进行
- **依赖管理**: 使用 `make install` 安装依赖，使用 `--legacy-peer-deps` 解决冲突
- **服务管理**: 使用 `make start/stop/restart` 管理服务
- **实时反馈**: 通过聊天界面与 AI 协作，支持流式响应

### 3. 聊天应用协作

- **命令执行**: 通过聊天界面执行 Makefile 命令
- **实时显示**: 支持 Markdown 格式的流式响应
- **错误处理**: 提供详细的错误信息和解决建议
- **项目分析**: 能够分析项目结构和技术栈

### 4. 开发工作流

1. **问题识别**: 通过聊天界面描述问题或需求
2. **环境检查**: 确认容器环境和依赖状态
3. **代码分析**: 分析相关代码文件和结构
4. **解决方案**: 提供具体的修改建议和代码
5. **测试验证**: 确保修改不会破坏现有功能
6. **文档更新**: 更新相关文档和注释

### 5. 代码质量标准

- **TypeScript**: 严格类型检查，避免 any 类型
- **Go**: 遵循 Go 语言最佳实践，使用 gofmt
- **CSS**: 使用 Tailwind CSS 类名，保持响应式设计
- **错误处理**: 完善的错误处理和用户反馈
- **性能优化**: 关注代码性能和用户体验

### 6. 特殊注意事项

- **多语言支持**: 项目支持中文、英文、日文
- **主题切换**: 支持亮色/暗色/系统主题
- **响应式设计**: 确保在各种设备上正常显示
- **SEO 优化**: 注意搜索引擎优化
- **安全性**: 注意数据安全和用户隐私

## 常用命令

```bash
# 安装依赖
make install

# 启动所有服务
make start

# 启动特定服务
make dev      # 开发工具站
make index    # 主站
make admin    # 管理后台
make backend  # 后端API

# 构建项目
make build

# 运行测试
make test

# 代码检查
make check
make lint

# 停止服务
make stop

# 重启服务
make restart
```

## 协作最佳实践

1. **明确需求**: 在聊天中清楚描述要解决的问题
2. **分步执行**: 将复杂任务分解为多个小步骤
3. **实时反馈**: 及时查看 AI 的响应和建议
4. **验证结果**: 执行命令后验证结果是否符合预期
5. **持续改进**: 根据反馈不断优化解决方案

## 故障排除

- **依赖问题**: 使用 `--legacy-peer-deps` 解决 npm 依赖冲突
- **端口冲突**: 检查端口占用情况，使用不同端口
- **容器问题**: 重启容器或重新构建镜像
- **权限问题**: 确保容器有足够的文件系统权限

---

_此文档定义了 AI Agent 与人类开发者协作的标准和最佳实践，确保开发过程的高效性和代码质量。_
